{% extends CMSOJ/Views/admin/main.html %}

{% block title %}
  {{ $editing ? 'Edit Section' : 'Create Section' }}
{% endblock %}

{% block page %}
<h1>{{ $editing ? 'Edit Section' : 'Create Section' }}</h1>

<form method="POST" action="/admin/menu/sections/save">
  <input type="hidden" name="_csrf" value="<?= \CMSOJ\Helpers\Csrf::token() ?>">

  <?php if (!empty($section['id'])): ?>
    <input type="hidden" name="id" value="<?= (int)$section['id'] ?>">
  <?php endif; ?>

  {% component 'admin/form/select', [
    'label'   => 'Parent Section',
    'name'    => 'parent_id',
    'id'      => 'parent_id',
    'options' => $parentOptions,
    'value'   => $section['parent_id'] ?? ($old['parent_id'] ?? ''),
    'error'   => $errors['parent_id'] ?? null
  ] %}

  {% component 'admin/form/input', [
    'label' => 'Name (EN)',
    'name'  => 'name_en',
    'id'    => 'name_en',
    'value' => $old['name_en'] ?? ($section['name_en'] ?? ''),
    'error' => $errors['name_en'] ?? null
  ] %}

  {% component 'admin/form/input', [
    'label' => 'Name (PT)',
    'name'  => 'name_pt',
    'id'    => 'name_pt',
    'value' => $old['name_pt'] ?? ($section['name_pt'] ?? ''),
    'error' => $errors['name_pt'] ?? null
  ] %}

  {% component 'admin/form/textarea', [
    'label' => 'Description (EN)',
    'name'  => 'description_en',
    'id'    => 'description_en',
    'value' => $old['description_en'] ?? ($section['description_en'] ?? ''),
    'error' => $errors['description_en'] ?? null,
    'rows'  => 3
  ] %}

  {% component 'admin/form/textarea', [
    'label' => 'Description (PT)',
    'name'  => 'description_pt',
    'id'    => 'description_pt',
    'value' => $old['description_pt'] ?? ($section['description_pt'] ?? ''),
    'error' => $errors['description_pt'] ?? null,
    'rows'  => 3
  ] %}

  {% component 'admin/form/input', [
    'label' => 'Sort Order',
    'name'  => 'sort_order',
    'id'    => 'sort_order',
    'type'  => 'number',
    'value' => $old['sort_order'] ?? ($section['sort_order'] ?? 0),
    'error' => $errors['sort_order'] ?? null
  ] %}

  {% component 'admin/form/toggle', [
    'label' => 'Active',
    'name'  => 'is_active',
    'id'    => 'is_active',
    'value' => ($old['is_active'] ?? $section['is_active'] ?? 1) ? true : false,
    'description' => 'Visible in the public menu'
  ] %}

  <button type="submit" class="btn btn-primary">Save Section</button>
</form>
{% endblock %}
